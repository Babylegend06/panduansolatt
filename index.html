<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Panduan Tarawih JAKIM - Landscape Mode</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298, #6a82fb); /* Malam biru menarik dengan gradient langit malam */
            color: #f0f4f8;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 15px 30px;
            margin: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            width: 90%;
        }
        h1 {
            font-size: 2.5em;
            margin: 0;
            color: #ffd700; /* Emas cerah */
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }
        #intro {
            font-size: 1.4em;
            margin: 10px 0 30px;
            padding: 0 20px;
            max-width: 90%;
        }
        #startBtn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.8em;
            cursor: pointer;
            border-radius: 60px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5);
            transition: all 0.4s ease;
            margin: 30px 0;
        }
        #startBtn:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.7);
        }
        #currentStep {
            background: rgba(30, 58, 138, 0.6);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 30px;
            padding: 40px 30px;
            margin: 20px;
            width: 90%;
            max-height: 70vh;
            overflow-y: auto;
            font-size: 2.2em; /* Besar & jelas di landscape */
            line-height: 1.8;
            direction: rtl;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.7s ease-out;
        }
        #currentStep.visible {
            opacity: 1;
            transform: scale(1);
        }
        #currentStep h2 {
            color: #ffd700;
            font-size: 1.8em;
            margin: 0 0 25px;
            direction: ltr;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.6);
        }
        .arab {
            font-size: 2.4em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .rumi {
            font-size: 1.4em;
            color: #e0f7fa;
            direction: ltr;
            display: block;
            margin-top: 15px;
        }
        #nextBtn {
            background: linear-gradient(45deg, #ffd54f, #ffca28);
            color: #1e3c72;
            border: none;
            padding: 15px 40px;
            font-size: 1.6em;
            cursor: pointer;
            border-radius: 50px;
            margin: 20px;
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.5);
            transition: all 0.3s;
        }
        #nextBtn:hover {
            transform: scale(1.08);
        }
        #status, #result {
            font-size: 1.4em;
            margin: 15px 0;
        }
        /* Force landscape optimization */
        @media (orientation: portrait) {
            body::before {
                content: "Putar telefon ke landscape untuk bacaan lebih besar & jelas!";
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 30px;
                border-radius: 20px;
                font-size: 1.8em;
                z-index: 9999;
                text-align: center;
                width: 90%;
            }
        }
        @media (orientation: landscape) {
            #currentStep { font-size: 2.8em; padding: 50px 40px; }
            h1 { font-size: 3.2em; }
            .arab { font-size: 3.2em; }
            .rumi { font-size: 1.8em; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Panduan Tarawih JAKIM</h1>
    </header>
    
    <div id="intro">Putar phone ke landscape supaya flip terus lebih jelas, besar & mudah baca. Baca Arab + Rumi kuat-kuat. Sebut "Aamiin" panjang habis Al-Fatihah â†’ auto ke surah pendek. Sebut "Allahu Akbar" untuk langkah seterusnya. Butang Next jika skip. ðŸŒ™ðŸ•Œ</div>
    
    <button id="startBtn">Mulakan Mikrofon</button>
    
    <p id="status">Sedang sedia...</p>
    
    <div id="currentStep"></div>
    
    <button id="nextBtn" style="display:none;">Langkah Seterusnya</button>
    
    <p id="result"></p>

    <script>
        const steps = [
            { title: 'Niat', arab: 'Ø£ÙØµÙŽÙ„ÙÙ‘ÙŠ Ø³ÙÙ†ÙŽÙ‘Ø©ÙŽ Ø§Ù„ØªÙŽÙ‘Ø±ÙŽØ§ÙˆÙÙŠØ­Ù Ø±ÙŽÙƒÙ’Ø¹ÙŽØªÙŽÙŠÙ’Ù†Ù Ù…ÙŽØ£Ù’Ù…ÙÙˆÙ…Ù‹Ø§ Ù„ÙÙ„ÙŽÙ‘Ù‡Ù ØªÙŽØ¹ÙŽØ§Ù„ÙŽÙ‰.', rumi: 'Usalli sunnata at-Tarawihi rak\'atayni ma\'muman lillahi ta\'ala.' },
            { title: 'Al-Fatihah (Rakaat 1)', arab: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù Ù…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù Ø¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù Ø§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ ØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ', rumi: 'Bismillahir rahmanir rahim. Alhamdu lillahi rabbil \'alamin. Ar rahmanir rahim. Maliki yawmid din. Iyyaka na\'budu wa iyyaka nasta\'in. Ihdinas siratal mustaqim. Siratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin.' },
            { title: 'Aamiin', arab: 'Ø¢Ù…ÙŠÙ†', rumi: 'Aamiin (sebut panjang)' },
            { title: 'Surah Al-Takathur', arab: 'Ø£ÙŽÙ„Ù’Ù‡ÙŽØ§ÙƒÙÙ…Ù Ø§Ù„ØªÙŽÙ‘ÙƒÙŽØ§Ø«ÙØ±Ù Ø­ÙŽØªÙŽÙ‘Ù‰Ù° Ø²ÙØ±Ù’ØªÙÙ…Ù Ø§Ù„Ù’Ù…ÙŽÙ‚ÙŽØ§Ø¨ÙØ±ÙŽ ÙƒÙŽÙ„ÙŽÙ‘Ø§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ Ø«ÙÙ…ÙŽÙ‘ ÙƒÙŽÙ„ÙŽÙ‘Ø§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ ÙƒÙŽÙ„ÙŽÙ‘Ø§ Ù„ÙŽÙˆÙ’ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ Ø¹ÙÙ„Ù’Ù…ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù Ù„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†ÙŽÙ‘ Ø§Ù„Ù’Ø¬ÙŽØ­ÙÙŠÙ…ÙŽ Ø«ÙÙ…ÙŽÙ‘ Ù„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†ÙŽÙ‘Ù‡ÙŽØ§ Ø¹ÙŽÙŠÙ’Ù†ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù Ø«ÙÙ…ÙŽÙ‘ Ù„ÙŽØªÙØ³Ù’Ø£ÙŽÙ„ÙÙ†ÙŽÙ‘ ÙŠÙŽÙˆÙ’Ù…ÙŽØ¦ÙØ°Ù Ø¹ÙŽÙ†Ù Ø§Ù„Ù†ÙŽÙ‘Ø¹ÙÙŠÙ…Ù', rumi: 'Alhakumut takathur. Hatta zurtumul maqabir. Kalla sawfa ta\'lamun. Thumma kalla sawfa ta\'lamun. Kalla law ta\'lamuna \'ilmal yaqin. Latarawunnal jahim. Thumma latarawunnaha \'aynal yaqin. Thumma latus\'alunna yawma\'idhin \'anin na\'im.' },
            { title: 'Ruku\'', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)', rumi: 'Subhana Rabbiyal \'Azim (3 kali)' },
            { title: 'I\'tidal', arab: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù', rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' },
            { title: 'Sujud Pertama', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Duduk Antara Sujud', arab: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ', rumi: 'Rabbi ighfir li warhamni' },
            { title: 'Sujud Kedua', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Al-Fatihah (Rakaat 2)', arab: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù Ù…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù Ø¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù Ø§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ ØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ', rumi: 'Bismillahir rahmanir rahim. Alhamdu lillahi rabbil \'alamin. Ar rahmanir rahim. Maliki yawmid din. Iyyaka na\'budu wa iyyaka nasta\'in. Ihdinas siratal mustaqim. Siratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin.' },
            { title: 'Aamiin', arab: 'Ø¢Ù…ÙŠÙ†', rumi: 'Aamiin (sebut panjang)' },
            { title: 'Surah Al-Asr', arab: 'ÙˆÙŽØ§Ù„Ù’Ø¹ÙŽØµÙ’Ø±Ù Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„Ù’Ø¥ÙÙ†Ù’Ø³ÙŽØ§Ù†ÙŽ Ù„ÙŽÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù Ø¥ÙÙ„ÙŽÙ‘Ø§ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ ÙˆÙŽØ¹ÙŽÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙŽÙ‘Ø§Ù„ÙØ­ÙŽØ§ØªÙ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙŽÙ‚ÙÙ‘ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙŽÙ‘Ø¨Ù’Ø±Ù', rumi: 'Wal \'asr. Innal insana lafi khusr. Illal ladhina amanu wa \'amilus salihat wa tawasaw bil haqq wa tawasaw bis sabr.' },
            { title: 'Ruku\'', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)', rumi: 'Subhana Rabbiyal \'Azim (3 kali)' },
            { title: 'I\'tidal', arab: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù', rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' },
            { title: 'Sujud Pertama', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Duduk Antara Sujud', arab: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ', rumi: 'Rabbi ighfir li warhamni' },
            { title: 'Sujud Kedua', arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Selesai 2 Rakaat', arab: 'Tahniah! Selesai 2 rakaat Tarawih.', rumi: 'Tahniah! Selesai 2 rakaat Tarawih.' }
        ];

        let currentIndex = 0;
        const currentStepEl = document.getElementById('currentStep');
        const nextBtn = document.getElementById('nextBtn');

        function showStep(index) {
            if (index >= steps.length) return;
            const step = steps[index];
            currentStepEl.innerHTML = `<h2>${step.title}</h2><div class="arab">${step.arab.replace(/\n/g, '<br>')}</div><div class="rumi">${step.rumi.replace(/\n/g, '<br>')}</div>`;
            currentStepEl.classList.remove('visible');
            setTimeout(() => currentStepEl.classList.add('visible'), 100);
            nextBtn.style.display = 'block';
        }

        showStep(currentIndex);

        nextBtn.onclick = () => {
            currentIndex++;
            showStep(currentIndex);
        };

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'ms-MY';
            recognition.interimResults = true;
        }

        const statusEl = document.getElementById('status');
        const resultEl = document.getElementById('result');
        const startBtn = document.getElementById('startBtn');

        startBtn.onclick = () => {
            if (recognition) {
                recognition.start();
                statusEl.textContent = 'Sedang mendengar... Sebut Aamiin panjang atau Allahu Akbar!';
                startBtn.style.background = 'linear-gradient(45deg, #4caf50, #388e3c)';
                startBtn.textContent = 'Mendengar ðŸŽ¤';
            } else {
                statusEl.textContent = 'Mikrofon tidak disokong. Gunakan butang Next sahaja.';
            }
        };

        if (recognition) {
            recognition.onresult = (event) => {
                let transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                resultEl.textContent = `Didengar: ${transcript}`;
                if (transcript.includes('aamiin') || (transcript.includes('amin') && transcript.length > 5)) {
                    if (steps[currentIndex].title.includes('Al-Fatihah')) {
                        currentIndex++;
                        showStep(currentIndex);
                        setTimeout(() => {
                            currentIndex++;
                            showStep(currentIndex);
                        }, 1200);
                    }
                } else if (transcript.includes('allahu akbar') || transcript.includes('allahuakbar')) {
                    currentIndex++;
                    showStep(currentIndex);
                }
            };

            recognition.onerror = (event) => {
                statusEl.textContent = `Ralat: ${event.error}. Cuba lagi!`;
            };

            recognition.onend = () => {
                if (startBtn.textContent.includes('Mendengar')) recognition.start();
            };
        }
    </script>
</body>
</html>
