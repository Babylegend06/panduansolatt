<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Panduan Sembahyang Sunat Tarawih JAKIM</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb, #e1bee7); /* Gradient lebih menarik dengan ungu lembut */
            color: #212121;
            text-align: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        header {
            background: rgba(255, 255, 255, 0.3); /* Glass effect lebih kuat */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 6px 35px rgba(0, 0, 0, 0.15);
            max-width: 90%;
        }
        h1 {
            color: #1565c0; /* Biru lebih dalam */
            font-size: 2.2em;
            margin: 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }
        #intro {
            font-size: 1.3em;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        #startBtn {
            background: linear-gradient(#42a5f5, #1e88e5); /* Biru lebih cerah */
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.6em;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 5px 25px rgba(30, 136, 229, 0.4);
            margin: 25px 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        #startBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(30, 136, 229, 0.5);
        }
        #status {
            font-size: 1.3em;
            color: #e91e63;
            font-weight: bold;
        }
        #currentStep {
            background: rgba(255, 255, 255, 0.35); /* Glass lebih tebal */
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            padding: 30px;
            margin: 25px auto;
            max-width: 85%;
            font-size: 1.7em;
            line-height: 1.9;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            direction: rtl;
            overflow-y: auto;
            max-height: 65vh;
            opacity: 0;
            transform: translateY(30px);
            animation: slideIn 0.6s forwards ease-out; /* Transisi cantik */
        }
        #currentStep h2 {
            color: #303f9f;
            font-size: 1.8em;
            margin: 0 0 20px;
            direction: ltr;
        }
        .rumi {
            font-size: 0.9em;
            color: #424242;
            direction: ltr;
            display: block;
            margin-top: 10px;
        }
        #nextBtn {
            background: linear-gradient(#ffee58, #ffca28); /* Kuning lebih cerah */
            color: #333;
            border: none;
            padding: 12px 35px;
            font-size: 1.3em;
            cursor: pointer;
            border-radius: 50px;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(255, 202, 40, 0.4);
            transition: transform 0.3s ease;
        }
        #nextBtn:hover {
            transform: scale(1.05);
        }
        #result {
            font-size: 1.1em;
            color: #757575;
            margin-top: 15px;
        }
        @keyframes slideIn {
            to { opacity: 1; transform: translateY(0); }
        }
        /* Landscape mode optimized */
        @media (orientation: landscape) {
            body { flex-direction: row; padding: 15px; align-items: stretch; }
            #currentStep { max-width: 75%; font-size: 1.5em; padding: 25px; max-height: 85vh; }
            header, #intro { max-width: 65%; }
            #startBtn { padding: 15px 40px; font-size: 1.4em; }
        }
        @media (max-width: 600px) {
            #currentStep { font-size: 1.5em; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Panduan Sembahyang Sunat Tarawih JAKIM</h1>
    </header>
    
    <div id="intro">Arahan: Putar phone ke landscape untuk pengalaman terbaik. Baca bacaan penuh dengan kuat (Arab & Rumi). Habis Al-Fatihah, sebut "Aamiin" (panjang) untuk auto ke surah pendek. Sebut "Allahu Akbar" untuk takbir ke langkah seterusnya (takbir tak ditunjuk). Gunakan butang 'Next' jika terskip. Latihan 2 rakaat penuh dengan surah malam 1-15. ðŸŒ™ðŸ•Œ</div>
    
    <button id="startBtn">Mulakan Mikrofon</button>
    
    <p id="status">Tekan & izinkan mikrofon...</p>
    
    <div id="currentStep"></div>
    <button id="nextBtn" style="display:none;">Next Step</button>
    
    <p id="result"></p>

    <script>
        const steps = [
            { 
                title: 'Niat Solat Tarawih', 
                arab: 'Ø£ÙØµÙŽÙ„ÙÙ‘ÙŠ Ø³ÙÙ†ÙŽÙ‘Ø©ÙŽ Ø§Ù„ØªÙŽÙ‘Ø±ÙŽØ§ÙˆÙÙŠØ­Ù Ø±ÙŽÙƒÙ’Ø¹ÙŽØªÙŽÙŠÙ’Ù†Ù Ù…ÙŽØ£Ù’Ù…ÙÙˆÙ…Ù‹Ø§ Ù„ÙÙ„ÙŽÙ‘Ù‡Ù ØªÙŽØ¹ÙŽØ§Ù„ÙŽÙ‰.', 
                rumi: 'Usalli sunnata at-Tarawihi rak\'atayni ma\'muman lillahi ta\'ala.' 
            },
            { 
                title: 'Al-Fatihah (Rakaat 1)', 
                arab: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nØ§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ\nØ§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nÙ…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù\nØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù\nØ§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ\nØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ', 
                rumi: 'Bismillahir rahmanir rahim\nAlhamdu lillahi rabbil \'alamin\nAr rahmanir rahim\nMaliki yawmid din\nIyyaka na\'budu wa iyyaka nasta\'in\nIhdinas siratal mustaqim\nSiratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin' 
            },
            { 
                title: 'Amin', 
                arab: 'Ø¢Ù…ÙŠÙ†', 
                rumi: 'Aamiin' 
            },
            { 
                title: 'Surah Al-Takathur (Rakaat 1)', 
                arab: 'Ø£ÙŽÙ„Ù’Ù‡ÙŽØ§ÙƒÙÙ…Ù Ø§Ù„ØªÙ‘ÙŽÙƒÙŽØ§Ø«ÙØ±Ù\nØ­ÙŽØªÙ‘ÙŽÙ‰Ù° Ø²ÙØ±Ù’ØªÙÙ…Ù Ø§Ù„Ù’Ù…ÙŽÙ‚ÙŽØ§Ø¨ÙØ±ÙŽ\nÙƒÙŽÙ„Ù‘ÙŽØ§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ\nØ«ÙÙ…Ù‘ÙŽ ÙƒÙŽÙ„Ù‘ÙŽØ§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ\nÙƒÙŽÙ„Ù‘ÙŽØ§ Ù„ÙŽÙˆÙ’ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ Ø¹ÙÙ„Ù’Ù…ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù\nÙ„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†Ù‘ÙŽ Ø§Ù„Ù’Ø¬ÙŽØ­ÙÙŠÙ…ÙŽ\nØ«ÙÙ…Ù‘ÙŽ Ù„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†Ù‘ÙŽÙ‡ÙŽØ§ Ø¹ÙŽÙŠÙ’Ù†ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù\nØ«ÙÙ…Ù‘ÙŽ Ù„ÙŽØªÙØ³Ù’Ø£ÙŽÙ„ÙÙ†Ù‘ÙŽ ÙŠÙŽÙˆÙ’Ù…ÙŽØ¦ÙØ°Ù Ø¹ÙŽÙ†Ù Ø§Ù„Ù†Ù‘ÙŽØ¹ÙÙŠÙ…Ù', 
                rumi: 'Alhakumut takathur\nHatta zurtumul maqabir\nKalla sawfa ta\'lamun\nThumma kalla sawfa ta\'lamun\nKalla law ta\'lamuna \'ilmal yaqin\nLatarawunnal jahim\nThumma latarawunnaha \'aynal yaqin\nThumma latus\'alunna yawma\'idhin \'anin na\'im' 
            },
            { 
                title: 'Ruku\'', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)', 
                rumi: 'Subhana Rabbiyal \'Azim (3 kali)' 
            },
            { 
                title: 'I\'tidal', 
                arab: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù', 
                rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' 
            },
            { 
                title: 'Sujud Pertama', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', 
                rumi: 'Subhana Rabbiyal A\'la (3 kali)' 
            },
            { 
                title: 'Duduk Antara Sujud', 
                arab: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ', 
                rumi: 'Rabbi ighfir li warhamni' 
            },
            { 
                title: 'Sujud Kedua', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', 
                rumi: 'Subhana Rabbiyal A\'la (3 kali)' 
            },
            { 
                title: 'Al-Fatihah (Rakaat 2)', 
                arab: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nØ§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ\nØ§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nÙ…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù\nØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù\nØ§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ\nØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ', 
                rumi: 'Bismillahir rahmanir rahim\nAlhamdu lillahi rabbil \'alamin\nAr rahmanir rahim\nMaliki yawmid din\nIyyaka na\'budu wa iyyaka nasta\'in\nIhdinas siratal mustaqim\nSiratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin' 
            },
            { 
                title: 'Amin', 
                arab: 'Ø¢Ù…ÙŠÙ†', 
                rumi: 'Aamiin' 
            },
            { 
                title: 'Surah Al-Asr (Rakaat 2)', 
                arab: 'ÙˆÙŽØ§Ù„Ù’Ø¹ÙŽØµÙ’Ø±Ù\nØ¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù’Ø¥ÙÙ†Ù’Ø³ÙŽØ§Ù†ÙŽ Ù„ÙŽÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù\nØ¥ÙÙ„Ù‘ÙŽØ§ Ø§Ù„Ù‘ÙŽØ°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ ÙˆÙŽØ¹ÙŽÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙ‘ÙŽØ§Ù„ÙØ­ÙŽØ§ØªÙ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙŽÙ‚Ù‘Ù ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙ‘ÙŽØ¨Ù’Ø±Ù', 
                rumi: 'Wal \'asr\nInnal insana lafi khusr\nIllal ladhina amanu wa \'amilus salihat wa tawasaw bil haqq wa tawasaw bis sabr' 
            },
            { 
                title: 'Ruku\'', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)', 
                rumi: 'Subhana Rabbiyal \'Azim (3 kali)' 
            },
            { 
                title: 'I\'tidal', 
                arab: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù', 
                rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' 
            },
            { 
                title: 'Sujud Pertama', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', 
                rumi: 'Subhana Rabbiyal A\'la (3 kali)' 
            },
            { 
                title: 'Duduk Antara Sujud', 
                arab: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ', 
                rumi: 'Rabbi ighfir li warhamni' 
            },
            { 
                title: 'Sujud Kedua', 
                arab: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)', 
                rumi: 'Subhana Rabbiyal A\'la (3 kali)' 
            },
            { 
                title: 'Selesai 2 Rakaat', 
                arab: 'Tahniah! Selesai 2 rakaat.', 
                rumi: 'Tahniah! Selesai 2 rakaat.' 
            }
        ];

        let currentIndex = 0;
        const currentStepEl = document.getElementById('currentStep');
        const nextBtn = document.getElementById('nextBtn');

        function showStep(index) {
            if (index >= steps.length) return;
            const step = steps[index];
            currentStepEl.innerHTML = `<h2>${step.title}</h2><p>${step.arab.replace(/\n/g, '<br>')}</p><span class="rumi">${step.rumi.replace(/\n/g, '<br>')}</span>`;
            nextBtn.style.display = 'block';
        }

        showStep(currentIndex);

        nextBtn.onclick = () => {
            currentIndex++;
            showStep(currentIndex);
        };

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'ms-MY';
            recognition.interimResults = true;
        }

        const statusEl = document.getElementById('status');
        const resultEl = document.getElementById('result');
        const startBtn = document.getElementById('startBtn');

        if (!SpeechRecognition) {
            statusEl.textContent = 'Browser tidak sokong.';
            startBtn.disabled = true;
        } else {
            startBtn.onclick = () => {
                recognition.start();
                statusEl.textContent = 'Mendengar... Sebut Aamiin (panjang) atau Allahu Akbar.';
                startBtn.style.background = 'linear-gradient(#66bb6a, #43a047)';
                startBtn.textContent = 'Mendengar ðŸŽ¤';
            };

            recognition.onresult = (event) => {
                let transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                resultEl.textContent = `Didengar: ${transcript}`;
                if (transcript.includes('aamiin') || transcript.includes('amin') && transcript.length > 4) { // Detect panjang approx
                    if (steps[currentIndex].title.includes('Al-Fatihah')) {
                        currentIndex++;
                        showStep(currentIndex); // Ke Amin
                        setTimeout(() => {
                            currentIndex++;
                            showStep(currentIndex); // Auto ke surah pendek
                        }, 1000);
                    }
                } else if (transcript.includes('allahu akbar') || transcript.includes('allahuakbar')) {
                    currentIndex++;
                    showStep(currentIndex);
                }
            };

            recognition.onerror = (event) => {
                statusEl.textContent = `Ralat: ${event.error}`;
            };

            recognition.onend = () => {
                if (startBtn.textContent.includes('Mendengar')) recognition.start();
            };
        }
    </script>
</body>
</html>
