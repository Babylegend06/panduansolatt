<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Panduan Solat Tarawih JAKIM</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #e3f2fd, #bbdefb); /* Gradient biru lembut */
            color: #212121;
            text-align: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        header {
            background: rgba(255, 255, 255, 0.2); /* Glass effect */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            max-width: 90%;
        }
        h1 {
            color: #1976d2; /* Biru iOS-like */
            font-size: 2em;
            margin: 0;
        }
        #intro {
            font-size: 1.2em;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            border-radius: 15px;
        }
        #startBtn {
            background: linear-gradient(#2196f3, #1976d2); /* Biru iOS */
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(33, 150, 243, 0.3);
            margin: 20px 0;
            transition: transform 0.2s;
        }
        #startBtn:hover {
            transform: scale(1.05);
        }
        #status {
            font-size: 1.2em;
            color: #f50057;
            font-weight: bold;
        }
        #currentStep {
            background: rgba(255, 255, 255, 0.25); /* Glassmorphism */
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 25px;
            margin: 20px auto;
            max-width: 85%;
            font-size: 1.6em;
            line-height: 1.8;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            direction: rtl;
            overflow-y: auto;
            max-height: 60vh;
            transition: all 0.3s ease;
        }
        #currentStep h2 {
            color: #0d47a1;
            font-size: 1.7em;
            margin: 0 0 15px;
            direction: ltr;
        }
        #nextBtn {
            background: linear-gradient(#ffeb3b, #ffc107); /* Kuning cerah */
            color: #333;
            border: none;
            padding: 10px 30px;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 50px;
            margin-top: 15px;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }
        #result {
            font-size: 1em;
            color: #757575;
            margin-top: 10px;
        }
        /* Landscape mode for phone */
        @media (orientation: landscape) {
            body { flex-direction: row; padding: 10px; }
            #currentStep { max-width: 70%; font-size: 1.4em; padding: 20px; max-height: 80vh; }
            header, #intro { max-width: 60%; }
        }
        @media (max-width: 600px) {
            #currentStep { font-size: 1.4em; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Panduan Sembahyang Sunat Tarawih JAKIM</h1>
    </header>
    
    <div id="intro">Arahan: Baca bacaan penuh dengan kuat. Habis Al-Fatihah, sebut "Amin" untuk terus ke surah pendek. Sebut "Allahu Akbar" untuk takbir ke langkah seterusnya. Mikrofon phone akan dengar suara kamu. Gunakan butang 'Next' jika terskip. Latihan 2 rakaat penuh mengikut panduan JAKIM (surah malam 1-15). ðŸŒ™ðŸ•Œ</div>
    
    <button id="startBtn">Mulakan Mikrofon</button>
    
    <p id="status">Tekan & izinkan mikrofon...</p>
    
    <div id="currentStep"></div>
    <button id="nextBtn" style="display:none;">Next Step</button>
    
    <p id="result"></p>

    <script>
        const steps = [
            { title: 'Niat Solat Tarawih', text: 'Ø£ÙØµÙŽÙ„ÙÙ‘ÙŠ Ø³ÙÙ†ÙŽÙ‘Ø©ÙŽ Ø§Ù„ØªÙŽÙ‘Ø±ÙŽØ§ÙˆÙÙŠØ­Ù Ø±ÙŽÙƒÙ’Ø¹ÙŽØªÙŽÙŠÙ’Ù†Ù Ù…ÙŽØ£Ù’Ù…ÙÙˆÙ…Ù‹Ø§ Ù„ÙÙ„ÙŽÙ‘Ù‡Ù ØªÙŽØ¹ÙŽØ§Ù„ÙŽÙ‰.' },
            { title: 'Takbiratul Ihram', text: 'Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±' },
            { title: 'Al-Fatihah (Rakaat 1)', text: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nØ§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙŽÙ‘Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ\nØ§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\nÙ…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù\nØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙŽÙ‘Ø§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù\nØ§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙÙ‘Ø±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ\nØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶ÙŽÙ‘Ø§Ù„ÙÙ‘ÙŠÙ†ÙŽ' },
            { title: 'Amin', text: 'Ø¢Ù…ÙŠÙ†' },
            { title: 'Surah Al-Takathur (Rakaat 1)', text: 'Ø£ÙŽÙ„Ù’Ù‡ÙŽØ§ÙƒÙÙ…Ù Ø§Ù„ØªÙ‘ÙŽÙƒÙŽØ§Ø«ÙØ±Ù\nØ­ÙŽØªÙ‘ÙŽÙ‰Ù° Ø²ÙØ±Ù’ØªÙÙ…Ù Ø§Ù„Ù’Ù…ÙŽÙ‚ÙŽØ§Ø¨ÙØ±ÙŽ\nÙƒÙŽÙ„Ù‘ÙŽØ§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ\nØ«ÙÙ…Ù‘ÙŽ ÙƒÙŽÙ„Ù‘ÙŽØ§ Ø³ÙŽÙˆÙ’ÙÙŽ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ\nÙƒÙŽÙ„Ù‘ÙŽØ§ Ù„ÙŽÙˆÙ’ ØªÙŽØ¹Ù’Ù„ÙŽÙ…ÙÙˆÙ†ÙŽ Ø¹ÙÙ„Ù’Ù…ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù\nÙ„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†Ù‘ÙŽ Ø§Ù„Ù’Ø¬ÙŽØ­ÙÙŠÙ…ÙŽ\nØ«ÙÙ…Ù‘ÙŽ Ù„ÙŽØªÙŽØ±ÙŽÙˆÙÙ†Ù‘ÙŽÙ‡ÙŽØ§ Ø¹ÙŽÙŠÙ’Ù†ÙŽ Ø§Ù„Ù’ÙŠÙŽÙ‚ÙÙŠÙ†Ù\nØ«ÙÙ…Ù‘ÙŽ Ù„ÙŽØªÙØ³Ù’Ø£ÙŽÙ„ÙÙ†Ù‘ÙŽ ÙŠÙŽÙˆÙ’Ù…ÙŽØ¦ÙØ°Ù Ø¹ÙŽÙ†Ù Ø§Ù„Ù†Ù‘ÙŽØ¹ÙÙŠÙ…Ù' },
            { title: 'Ruku\'', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)' },
            { title: 'I\'tidal', text: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù' },
            { title: 'Sujud Pertama', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)' },
            { title: 'Duduk Antara Sujud', text: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ' },
            { title: 'Sujud Kedua', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)' },
            { title: 'Al-Fatihah (Rakaat 2)', text: 'Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ…Ù\n... (sama seperti rakaat 1)' },
            { title: 'Amin', text: 'Ø¢Ù…ÙŠÙ†' },
            { title: 'Surah Al-Asr (Rakaat 2)', text: 'ÙˆÙŽØ§Ù„Ù’Ø¹ÙŽØµÙ’Ø±Ù\nØ¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù’Ø¥ÙÙ†Ù’Ø³ÙŽØ§Ù†ÙŽ Ù„ÙŽÙÙÙŠ Ø®ÙØ³Ù’Ø±Ù\nØ¥ÙÙ„Ù‘ÙŽØ§ Ø§Ù„Ù‘ÙŽØ°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ ÙˆÙŽØ¹ÙŽÙ…ÙÙ„ÙÙˆØ§ Ø§Ù„ØµÙ‘ÙŽØ§Ù„ÙØ­ÙŽØ§ØªÙ ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„Ù’Ø­ÙŽÙ‚Ù‘Ù ÙˆÙŽØªÙŽÙˆÙŽØ§ØµÙŽÙˆÙ’Ø§ Ø¨ÙØ§Ù„ØµÙ‘ÙŽØ¨Ù’Ø±Ù' },
            { title: 'Ruku\'', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø¹ÙŽØ¸ÙÙŠÙ…Ù (3 kali)' },
            { title: 'I\'tidal', text: 'Ø³ÙŽÙ…ÙØ¹ÙŽ Ø§Ù„Ù„ÙŽÙ‘Ù‡Ù Ù„ÙÙ…ÙŽÙ†Ù’ Ø­ÙŽÙ…ÙØ¯ÙŽÙ‡Ù Ø±ÙŽØ¨ÙŽÙ‘Ù†ÙŽØ§ ÙˆÙŽÙ„ÙŽÙƒÙŽ Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù' },
            { title: 'Sujud Pertama', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)' },
            { title: 'Duduk Antara Sujud', text: 'Ø±ÙŽØ¨ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙŠ ÙˆÙŽØ§Ø±Ù’Ø­ÙŽÙ…Ù’Ù†ÙÙŠ' },
            { title: 'Sujud Kedua', text: 'Ø³ÙØ¨Ù’Ø­ÙŽØ§Ù†ÙŽ Ø±ÙŽØ¨ÙÙ‘ÙŠÙŽ Ø§Ù„Ù’Ø£ÙŽØ¹Ù’Ù„ÙŽÙ‰ (3 kali)' },
            { title: 'Selesai 2 Rakaat', text: 'Tahniah! Selesai 2 rakaat. Ulang untuk lebih.' }
        ];

        let currentIndex = 0;
        const currentStepEl = document.getElementById('currentStep');
        const nextBtn = document.getElementById('nextBtn');

        function showStep(index) {
            if (index >= steps.length) return;
            const step = steps[index];
            currentStepEl.innerHTML = `<h2>${step.title}</h2><p>${step.text.replace(/\n/g, '<br>')}</p>`;
            nextBtn.style.display = 'block';
        }

        showStep(currentIndex);

        nextBtn.onclick = () => {
            currentIndex++;
            showStep(currentIndex);
        };

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'ms-MY';
            recognition.interimResults = true;
        }

        const statusEl = document.getElementById('status');
        const resultEl = document.getElementById('result');
        const startBtn = document.getElementById('startBtn');

        if (!SpeechRecognition) {
            statusEl.textContent = 'Browser tidak sokong.';
            startBtn.disabled = true;
        } else {
            startBtn.onclick = () => {
                recognition.start();
                statusEl.textContent = 'Mendengar... Sebut Amin atau Allahu Akbar.';
                startBtn.style.background = 'linear-gradient(#4caf50, #388e3c)';
                startBtn.textContent = 'Mendengar ðŸŽ¤';
            };

            recognition.onresult = (event) => {
                let transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                resultEl.textContent = `Didengar: ${transcript}`;
                if (transcript.includes('amin')) {
                    if (steps[currentIndex].title.includes('Al-Fatihah')) {
                        currentIndex++;
                        showStep(currentIndex); // Ke Amin
                        setTimeout(() => {
                            currentIndex++;
                            showStep(currentIndex); // Auto ke surah pendek selepas Amin
                        }, 1000);
                    }
                } else if (transcript.includes('allahu akbar') || transcript.includes('allahuakbar')) {
                    currentIndex++;
                    showStep(currentIndex);
                }
            };

            recognition.onerror = (event) => {
                statusEl.textContent = `Ralat: ${event.error}`;
            };

            recognition.onend = () => {
                if (startBtn.textContent.includes('Mendengar')) recognition.start();
            };
        }
    </script>
</body>
</html>
