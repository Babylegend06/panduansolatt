<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Panduan Tarawih JAKIM - Full Screen</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); /* Malam gelap elegan */
            color: #f0f8ff;
            overflow: hidden;
        }
        #start-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.6);
            z-index: 10;
            transition: opacity 0.8s;
        }
        #start-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #startBtn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53, #ffab91);
            color: white;
            border: none;
            padding: 30px 80px;
            font-size: 2.5em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.6);
            transition: all 0.4s ease;
        }
        #startBtn:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 50px rgba(255, 107, 107, 0.8);
        }
        #guide-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            opacity: 0;
            transition: opacity 1s;
        }
        #guide-screen.visible {
            opacity: 1;
        }
        #currentStep {
            font-size: 3em; /* Sangat besar di landscape */
            line-height: 1.6;
            text-align: center;
            direction: rtl;
            max-height: 80vh;
            overflow-y: auto;
            width: 95%;
        }
        .arab {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 30px;
        }
        .rumi {
            font-size: 0.8em;
            color: #d0f0ff;
            direction: ltr;
            margin-top: 20px;
        }
        #progress {
            position: absolute;
            top: 20px;
            font-size: 1.4em;
            color: #ffd700;
        }
        #nextBtn {
            position: absolute;
            bottom: 40px;
            background: rgba(255,215,0,0.8);
            color: #0f2027;
            border: none;
            padding: 20px 60px;
            font-size: 1.8em;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(255,215,0,0.5);
        }
        #status {
            position: absolute;
            bottom: 120px;
            font-size: 1.2em;
        }
        @media (orientation: landscape) {
            #currentStep { font-size: 4.5em; }
            .arab { font-size: 1.8em; }
            .rumi { font-size: 1.1em; }
            #startBtn { font-size: 3em; padding: 40px 100px; }
        }
        @media (orientation: portrait) {
            body::before {
                content: "Putar ke landscape untuk bacaan full screen terbaik!";
                position: fixed;
                inset: 0;
                background: rgba(0,0,0,0.9);
                color: white;
                font-size: 2em;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 999;
                padding: 40px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div id="start-screen">
        <h1 style="color:#ffd700; font-size:3em; margin-bottom:40px;">Panduan Tarawih JAKIM</h1>
        <button id="startBtn">MULAKAN FULL SCREEN BACAAN</button>
    </div>

    <div id="guide-screen">
        <div id="progress">Langkah 1 / 18</div>
        <div id="currentStep"></div>
        <button id="nextBtn">Langkah Seterusnya</button>
        <p id="status">Sedang mendengar... Sebut "Aamiin" panjang atau "Allahu Akbar"</p>
    </div>

    <script>
        const steps = [
            { title: 'Niat', arab: 'أُصَلِّي سُنَّةَ التَّرَاوِيحِ رَكْعَتَيْنِ مَأْمُومًا لِلَّهِ تَعَالَى', rumi: 'Usalli sunnata at-Tarawihi rak\'atayni ma\'muman lillahi ta\'ala' },
            { title: 'Al-Fatihah (Rakaat 1)', arab: 'بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ الرَّحْمَٰنِ الرَّحِيمِ مَالِكِ يَوْمِ الدِّينِ إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ', rumi: 'Bismillahir rahmanir rahim. Alhamdu lillahi rabbil \'alamin. Ar rahmanir rahim. Maliki yawmid din. Iyyaka na\'budu wa iyyaka nasta\'in. Ihdinas siratal mustaqim. Siratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin' },
            { title: 'Aamiin', arab: 'آمين', rumi: 'Aamiin (panjang)' },
            { title: 'Surah Al-Takathur', arab: 'أَلْهَاكُمُ التَّكَاثُرُ حَتَّىٰ زُرْتُمُ الْمَقَابِرَ كَلَّا سَوْفَ تَعْلَمُونَ ثُمَّ كَلَّا سَوْفَ تَعْلَمُونَ كَلَّا لَوْ تَعْلَمُونَ عِلْمَ الْيَقِينِ لَتَرَوُنَّ الْجَحِيمَ ثُمَّ لَتَرَوُنَّهَا عَيْنَ الْيَقِينِ ثُمَّ لَتُسْأَلُنَّ يَوْمَئِذٍ عَنِ النَّعِيمِ', rumi: 'Alhakumut takathur. Hatta zurtumul maqabir. Kalla sawfa ta\'lamun. Thumma kalla sawfa ta\'lamun. Kalla law ta\'lamuna \'ilmal yaqin. Latarawunnal jahim. Thumma latarawunnaha \'aynal yaqin. Thumma latus\'alunna yawma\'idhin \'anin na\'im' },
            { title: 'Ruku\'', arab: 'سُبْحَانَ رَبِّيَ الْعَظِيمِ (3 kali)', rumi: 'Subhana Rabbiyal \'Azim (3 kali)' },
            { title: 'I\'tidal', arab: 'سَمِعَ اللَّهُ لِمَنْ حَمِدَهُ رَبَّنَا وَلَكَ الْحَمْدُ', rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' },
            { title: 'Sujud Pertama', arab: 'سُبْحَانَ رَبِّيَ الْأَعْلَى (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Duduk Antara Sujud', arab: 'رَبِّ اغْفِرْ لِي وَارْحَمْنِي', rumi: 'Rabbi ighfir li warhamni' },
            { title: 'Sujud Kedua', arab: 'سُبْحَانَ رَبِّيَ الْأَعْلَى (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Al-Fatihah (Rakaat 2)', arab: 'بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ الرَّحْمَٰنِ الرَّحِيمِ مَالِكِ يَوْمِ الدِّينِ إِيَّاكَ نَعْبُدُ وَإِيَّاكَ نَسْتَعِينُ اهْدِنَا الصِّرَاطَ الْمُسْتَقِيمَ صِرَاطَ الَّذِينَ أَنْعَمْتَ عَلَيْهِمْ غَيْرِ الْمَغْضُوبِ عَلَيْهِمْ وَلَا الضَّالِّينَ', rumi: 'Bismillahir rahmanir rahim. Alhamdu lillahi rabbil \'alamin. Ar rahmanir rahim. Maliki yawmid din. Iyyaka na\'budu wa iyyaka nasta\'in. Ihdinas siratal mustaqim. Siratal ladhina an\'amta \'alayhim ghayril maghdubi \'alayhim wa lad dallin' },
            { title: 'Aamiin', arab: 'آمين', rumi: 'Aamiin (panjang)' },
            { title: 'Surah Al-Asr', arab: 'وَالْعَصْرِ إِنَّ الْإِنْسَانَ لَفِي خُسْرٍ إِلَّا الَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ وَتَوَاصَوْا بِالْحَقِّ وَتَوَاصَوْا بِالصَّبْرِ', rumi: 'Wal \'asr. Innal insana lafi khusr. Illal ladhina amanu wa \'amilus salihat wa tawasaw bil haqq wa tawasaw bis sabr' },
            { title: 'Ruku\'', arab: 'سُبْحَانَ رَبِّيَ الْعَظِيمِ (3 kali)', rumi: 'Subhana Rabbiyal \'Azim (3 kali)' },
            { title: 'I\'tidal', arab: 'سَمِعَ اللَّهُ لِمَنْ حَمِدَهُ رَبَّنَا وَلَكَ الْحَمْدُ', rumi: 'Sami\'allahu liman hamidah Rabbana walakal hamd' },
            { title: 'Sujud Pertama', arab: 'سُبْحَانَ رَبِّيَ الْأَعْلَى (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Duduk Antara Sujud', arab: 'رَبِّ اغْفِرْ لِي وَارْحَمْنِي', rumi: 'Rabbi ighfir li warhamni' },
            { title: 'Sujud Kedua', arab: 'سُبْحَانَ رَبِّيَ الْأَعْلَى (3 kali)', rumi: 'Subhana Rabbiyal A\'la (3 kali)' },
            { title: 'Selesai', arab: 'Tahniah! Selesai 2 rakaat Tarawih.', rumi: 'Tahniah! Selesai 2 rakaat Tarawih.' }
        ];

        let currentIndex = 0;
        const startScreen = document.getElementById('start-screen');
        const guideScreen = document.getElementById('guide-screen');
        const currentStepEl = document.getElementById('currentStep');
        const progressEl = document.getElementById('progress');
        const nextBtn = document.getElementById('nextBtn');
        const statusEl = document.getElementById('status');

        function showStep() {
            const step = steps[currentIndex];
            currentStepEl.innerHTML = `<div class="arab">${step.arab.replace(/\n/g, '<br>')}</div><div class="rumi">${step.rumi.replace(/\n/g, '<br>')}</div>`;
            progressEl.textContent = `Langkah ${currentIndex + 1} / ${steps.length}`;
        }

        document.getElementById('startBtn').onclick = () => {
            startScreen.classList.add('hidden');
            guideScreen.classList.add('visible');
            showStep();
            // Cuba full screen
            if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen();
        };

        nextBtn.onclick = () => {
            currentIndex++;
            if (currentIndex < steps.length) showStep();
            else statusEl.textContent = 'Selesai! Ulang jika mahu.';
        };

        // Mikrofon (opsional auto)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (SpeechRecognition) {
            const recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'ms-MY';
            recognition.interimResults = true;

            recognition.onresult = (event) => {
                let transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                if (transcript.includes('aamiin') || (transcript.includes('amin') && transcript.length > 5)) {
                    if (steps[currentIndex].title.includes('Al-Fatihah')) {
                        currentIndex += 2; // Skip ke surah pendek
                        showStep();
                    }
                } else if (transcript.includes('allahu akbar') || transcript.includes('allahuakbar')) {
                    currentIndex++;
                    showStep();
                }
            };

            recognition.start(); // Auto start selepas full screen
        }
    </script>
</body>
</html>
